<!DOCTYPE html>
<html ng-app="myApp">
  <head>
    <meta charset="utf-8">
    <script src="vendors/angular.min.js"></script>
    <script src="vendors/jquery-2.2.3.min.js"></script>
    <script src="scripts.js"></script>
    <link rel="stylesheet" href="css/stylesheet.css" charset="utf-8">
    <link rel="stylesheet" href="css/xeditable.css" charset="utf-8">
    <script src="vendors/xeditable.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Raleway:600,800' rel='stylesheet' type='text/css'>
    <title>Angular Template</title>
  </head>
  <body>
    <h2>Test Angular Xeditable for Hotel Rooms</h2>

  <div ng-controller="Ctrl">
    <input type= "text" ng-model= "roomnum" value= "" placeholder="Enter Room Number"><button type="button" name="getRoomButton" ng-click= "getRoom()" >Get Room</button>
    <table class="table table-bordered table-hover table-condensed">
            <tr style="font-weight: bold">
                <th>Room ID</th>
                <th>Room Number</th>
                <th>Type</th>
                <th>Capacity</th>
                <th>Price</th>
                <th>Check In Date</th>
                <th>Check Out Date</th>
                <th>Notes</th>
            </tr>
            <tr ng-repeat='record in roomToShow'>
              <td><span editable-text="record.id" e-form="rowform" e-required>{{ record.id }}</span></td>
              <td><span editable-text="record.room_number" e-form="rowform" e-required>{{ record.room_number }}</span></td>
              <td><span editable-text="record.room_type" e-form="rowform" e-required>{{ record.room_type }}</span></td>
              <td><span editable-text="record.capacity" e-form="rowform" e-required>{{ record.capacity }}</span></td>
              <td><span editable-text="record.price" e-form="rowform" e-required>{{ record.price }}</span></td>
              <td><span editable-text="record.check_in_date" e-form="rowform" e-required>{{ record.check_in_date }}</span></td>
              <td><span editable-text="record.check_out_date" e-form="rowform" e-required>{{ record.check_out_date}}</span></td>
              <td><span editable-text="record.notes" e-form="rowform" e-required>{{ record.notes }}</span></td>
              <td style="white-space:nowrap">
                <!-- <form editable-form name="rowform" onbeforesave="makeSqlHappy($data, record.id )" ng-show="rowform.$visible" class="form-buttons form-inline" shown="inserted == record"> -->
                <form editable-form name="rowform" onaftersave="makeSqlHappy(record.room_number, record.room_type, record.capacity, record.price, record.check_in_date, record.check_out_date, record.notes, record.id )" ng-show="rowform.$visible" class="form-buttons form-inline" shown="inserted == record">
                  <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary">
                      Save
                  </button>
                  <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-default">
                      Cancel
                  </button>
                </form>
                <div class="buttons" ng-show="!rowform.$visible">
                  <button class="btn btn-primary" ng-click="rowform.$show()">Edit</button>
                </div>
            </tr>
          </table>

  </div> <!-- end controller -->

  </body>

</html>
